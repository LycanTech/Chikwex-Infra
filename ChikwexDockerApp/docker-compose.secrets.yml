# ChikwexDockerApp - Secrets Management Override
# Usage: docker-compose -f docker-compose.yml -f docker-compose.secrets.yml up -d
#
# First, create the secrets:
#   echo "your_db_password" | docker secret create db_password -
#   echo "your_redis_password" | docker secret create redis_password -

version: '3.8'

services:
  backend:
    secrets:
      - db_password
    environment:
      - DB_PASSWORD_FILE=/run/secrets/db_password

  db:
    secrets:
      - db_password
    environment:
      - POSTGRES_PASSWORD_FILE=/run/secrets/db_password

secrets:
  db_password:
    external: true
  redis_password:
    external: true
