# SSL Parameters
# Managed by Ansible - Do not edit manually
# {{ ansible_managed }}

# SSL Protocols
ssl_protocols {{ nginx_ssl_protocols | default('TLSv1.2 TLSv1.3') }};

# SSL Ciphers
ssl_ciphers {{ nginx_ssl_ciphers | default('ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384') }};
ssl_prefer_server_ciphers {{ 'on' if nginx_ssl_prefer_server_ciphers | default(true) else 'off' }};

# SSL Session
ssl_session_timeout {{ nginx_ssl_session_timeout | default('1d') }};
ssl_session_cache {{ nginx_ssl_session_cache | default('shared:SSL:10m') }};
ssl_session_tickets off;

# Diffie-Hellman parameters
ssl_dhparam /etc/nginx/ssl/dhparam.pem;

# OCSP Stapling
ssl_stapling on;
ssl_stapling_verify on;

# DNS Resolver for OCSP
resolver 8.8.8.8 8.8.4.4 valid=300s;
resolver_timeout 5s;

# HSTS (uncomment if using HTTPS only)
# add_header Strict-Transport-Security "max-age=63072000; includeSubDomains; preload" always;
